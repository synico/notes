## 进程管理

### 查看进程
#### ps
查看系统所有进程命令`ps aux`，显示的项目中，各字段含义如下

名称|含义
:--|:--
USER|该进程属于哪个账号
PID|该进程的进程标识符
%CPU|该进程使用掉的CPU资源百分比
%MEM|该进程所占用的物理内存百分比
VSZ|该进程使用掉的虚拟内存量 (KB)
RSS|该进程占用的固定的内存量 (KB)

或使用`ps axjf`列出类似进程树的程序显示。


#### top
动态查看进程的变化
```
top [-d 数字]
top [-bnp]
```

参数|含义
:--|:--
-d|整个进程界面更新的秒数，默认是5秒
-b|以批次的方式执行top，通常会搭配数据流重定向来将批处理的结果输出成文件
-n|与-b搭配，表示需要进行几次top的输出结果
-p|指定某些个PID来进行查看检测

在top执行过程中可以使用的按键命令

命令|含义
:--|:--
?|显示在top当中可以输入的按键命令
P|以CPU的使用资源排序显示
M|以内存的使用资源排序显示
N|以PID来排序
T|以该进程使用的CPU时间积累 (TIME+) 排序
k|给予某个PID一个信号 (signal)
r|给予某个PID重新制定一个nice值
q|离开top软件的按键

***

### 进程
#### 前后台切换
* 通过`CTRL+Z`挂起进程并放入后台
* 通过`jobs`显示当前后台进程
* 通过`bg %N`使第N个任务在后台运行
* 通过`fg %N`使第N个任务在前台运行

***

### 查询已打开文件或进程打开的文件
#### fuser
通过文件或文件系统找出正在使用该文件的程序
```
fuser [-umv] [-k [i] [-signal]] file/dir
fuser -uv .
```

参数|含义
:--|:--
-u|除了进程PID，同时列出该进程的所有者
-m|后面接的文件名会主动上提到该文件系统的顶层，对umount不成功很有效
-v|列出每个文件与程序还有命令的完整相关性
-k|找出使用该文件或目录的PID，并试图以SIGKILL这个信号给予该PID
-i|必须与-k配合，在删除PID之前会先询问用户意愿
-signal|如-1，-15等，默认是SIGKILL (-9)

输出结果中ACCESS选项含义

选项|含义
:--|:--
c|此进程在当前的目录下 (非子目录)
e|可被触发为执行状态
f|是一个被打开的文件
r|代表顶层目录 (root directory)
F|该文件被打开了，不过在等待回应中
m|可能为分享的动态链接库

#### lsof
列出被进程所打开的文件名
```
lsof [-aUu] [+d]
lsof -u nick | grep java
lsof /path/file ## 查看哪些进程在使用某个文件
lsof -c mysql
lsof -p 1121
lsof -i
lsof -i tcp ## 列出所有tcp网络连接信息
lsof -i tcp:80
lsof -i udp ## 列出所有udp网络连接信息
lsof -i udp:55
```

参数|含义
:--|:--
-a|多项数据需要同时成立才显示出结果时
-u|后面接username，列出该用户相关进程所打开的文件
-g|后面接group，列出该用户组打开的文件
-c|列出某个程序所打开的文件信息
-p|通过某个进程号显示该进程打开的文件
-i|列出所有网络连接


***
