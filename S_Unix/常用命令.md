## 常用命令

### POSIX内置的Shell变量
变量|意义
:-|:-|
\#|目前进程的参数个数
@|传递给当前进程的命令行参数。置于双引号内，可展开为个别的参数。
\*|当前进程的命令行参数。置于双引号内，可展开为一个单独参数。
?|前一命令的退出状态
$|Shell进程的进程编号即process ID
0|Shell程序的名字
!|最近一个后台命令的进程编号
HOME|根目录
IFS|内部的字段分割器
PATH|命令的查找路径
PPID|父进程的进程编号
PS1|主要的命令提示字符串
PS2|行继续的提示字符串
PS4|以set -x设置的执行跟踪的提示字符串
PWD|当前工作目录

***
### apt
apt命令可认为是apt-get，apt-cache和apt-config三个命令的集合。
#### apt和apt-get的区别
apt命令|取代的命令|命令的功能
:--|:--|:--
apt install|apt-get install|安装软件包
apt remove|apt-get remove|移除软件包
apt purge|apt-get purge|移除软件包及配置
apt update|apt-get update|刷新存储库索引
apt upgrade|apt-get upgrade|升级所有可升级的软件包
apt autoremove|apt-get remove|自动删除不需要的包
apt full-upgrade|apt-get dist-upgrade|在升级软件包时自动处理依赖关系
apt search|apt-cache search|搜索应用程序
apt show|apt-cache show|显示安装细节

***

### du
du命令用来查看文件大小。
#### 显示所有文件大小
```
du -sh .[!.]* * | sort -hr
其中.[!.]*是正则表达式
```
***

### time
用于测量一个命令的运行时间。
```
time <command>
```
* real为实际使用时间
* user为用户态使用时间
* sys为内核态使用时间
***

### scp
命令参数

参数名|描述
:--|:--
-C|允许压缩
-p|保留原文件的修改时间，访问时间和访问权限
-r|递归复制整个目录
-P或port|指定数据传输用到的端口号

#### 本地复制到远程
```
scp local_file remote_username@remote_ip:remote_folder
```
#### 远程复制到本地
```
scp remote_username@remote_ip:remote_file local_file
```
***

### telnet
```
telnet host port
```
***

### split
命令参数

参数名|描述
:--|:--
-b|设置每个分割包的大小，单位还可以是k
-d|指定生成的分割包后缀为数字的形式
-a|设定序列的长度，默认值为2
```
split -b 40M -d -a 1 data.tar.gz data.tar.gz
cat data.tar.gz.* | tar -zxv
```
***

### 文件内容查看
#### cat
由第一行开始显示文件内容

参数|含义
:--|:--
-A|相当于-vET的整合参数，可列出一些特殊字符
-b|列出行号，仅针对非空白行
-n|列出行号，空白行也会有行号
-v|列出一些看不出来的特殊字符
-E|将结尾的断行字符$显示出来
-T|将[Tab]按键以^I显示出来
#### tac
从最后一行倒叙开始显示文件内容
#### nl
显示文件内容同时显示行号

参数|含义
:--|:--
-b|指定行号指定的方式
-n|列出行号的方法
-w|行号字段占用的位数

```
nl -b a //表示不论是否为空行，也同样列出行号
nl -b t //如果有空行，空的一行不列出行号

nl -n ln //行号在屏幕最左方显示
nl -n rn //行号在自己字段的最右方显示，且不加0
nl -n rz //行号在自己字段的最右方显示，且加0
```
#### more
一页一页显示文件内容
#### less
与more类似，可以往前翻页

按键|含义
:--|:--
空格键 (space) |向下翻一页
Enter|向下滚动一行
/字符串|在显示的内容中，向下查询"字符串"这个关键字
:f|显示当前文件名以及目前显示的行数
b或[ctrl]-b|往回翻页，该操作仅对文件有效，对管道无效

#### head
只看头几行
#### tail
只看结尾几行
#### od
以二进制的方式读取文件内容
***

### 查看文件属性
#### ls命令
```
ls -ll file_name
```
#### file命令
```
file file_name
```
#### stat命令
```
stat file_name
```
***

### 文件隐藏属性
#### chattr
```
chattr [+-=] [ASacdistu] 文件或目录名称
```
参数

参数|含义
:--|:--
+|增加某一个特殊参数，其他原本存在参数不变
-|删除某一个特殊参数，其他原本存在参数不变
=|仅有后面接的参数
a|使文件只能增加数据，而不能删除也不能修改数据，只有root才能设置这个属性
i|使文件不能被删除，改名，设置连接也无法写入或添加数据，只有root才能设置这个属性

#### lsattr
显示文件隐藏属性
***

### 文件打包压缩
#### gzip
可使用zcat读取纯文本被压缩后的压缩文件。

参数|含义
:--|:--
-c|将压缩的数据输出到屏幕，可通过数据流重定向来处理
-d|用于解压的参数
-t|检验一个压缩文件的一致性
-v|显示压缩比等信息
-#|压缩等级，-1最快，但压缩比最差，-9最慢，默认压缩比为-6

#### bzip2
bzip2压缩比比gzip更高，可使用bzcat读取纯文本被压缩后的压缩文件。

参数|含义
:--|:--
-c|将压缩的数据输出到屏幕
-d|解压缩的参数
-k|保留原文件，而不会删除原始的文件
-z|压缩的参数
-v|显示压缩比等信息
-#|同gzip相同，-1最快，-9最慢

#### tar
将多个目录或文件打包成一个大文件。

参数|含义
:--|:--
-c|新建打包文件，可搭配-v来查看过程中被打包的文件名
-t|查看打包文件包含的文件名
-x|解打包，可搭配-C在特定目录解开
-j|通过bzip2的支持压缩或解压缩
-z|通过gzip的支持压缩或解压缩
-f filename|-f后接被处理的文件名，建议-f单独写一个参数

***

### Expect命令
用来处理交互的命令，包括最关键的四个命令。
#### send
接收一个字符串参数，并将该参数发送到进程。
#### expect
等待一个进程的反馈，可以接收一个字符串参数，也可以接收正则表达式参数。
#### spawn
用来启动新的进程，spawn后的send和expect命令都是和spawn打开的进程交互的。
#### interact
