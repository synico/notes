## SQL语句

### 解析顺序
1. __FROM__
  FROM后面的表标识了这条语句要查询的数据源和一些子句，最后FROM过程之后会产生一个虚拟表VT1。
  1.1 __笛卡尔积__
    这个步骤会计算两个相关联表的笛卡尔积 (CROSS JOIN) ，生成虚拟表VT1-J1。
  1.2 __ON过滤__
    这个步骤基于虚拟表VT1-J1这一个虚拟表进行过滤，过滤出所有满足ON谓词条件的列，生成虚拟表VT1-J2。
  1.3 __添加外部列__
    如果使用了外连接，保留表中的不符合ON条件的列也会被加入到VT1-J2中，作为外部行，生成虚拟表VT1-J3。
2. __WHERE__
  对VT1过程中生成的临时表进行过滤，满足WHERE子句的列被插入到VT2表中。
3. __GROUP BY__
  这个子句会把VT2中生成的表按照GROUP BY中的列进行分组，生成VT3表。
4. __聚合函数__

5. __HAVING__
  这个子句对VT3表中不同的组进行过滤，满足HAVING条件的子句被加入到VT4表中。
6. __SELECT__
  这个字句对SELECT子句中的元素进行处理生成VT5表
  6.1 __计算表达式__
    计算SELECT子句中的表达式，生成VT5_1表。
  6.2 __DISTINCT__
    寻找VT5_1表中重复列，并删掉，生成VT5_2表。
  6.3 __TOP__
    从ORDER BY子句定义的结果中，筛选出符合条件的列，生成VT5_3表。
7. __ORDER BY__
  从VT5_3表中，根据ORDER BY子句的条件对结果进行排序，生成VT6表。
8. __limit m,n__
  从第 (m+1) 条开始，显示n条记录。

***

### WHERE与HAVING的区别
#### WHERE
WHERE是一个约束声明，使用WHERE来约束来自数据库的数据，WHERE是在结果返回之前起作用，且WHERE中不能使用聚合函数。
#### HAVING
HAVING是一个过滤声明，是在查询返回结果集以后对查询结果进行的过滤操作，在HAVING中可以使用聚合函数。
#### GROUP BY
* 用HAVING就一定要和GROUP BY连用，但是用GROUP BY不一定有HAVING。
* 只要条件里面的字段，不是表里已有的字段就需要用HAVING。
* WHERE子句在聚合前先筛选记录，即在GROUP BY子句和HAVING子句前；而HAVING子句在聚合后对组记录进行筛选。
