## 位运算

### 机器数和真值
#### 机器数
一个数在计算机中的二进制表示形式，叫做这个数的机器数。机器数是带符号的，用一个数的最高位存放符号，正数为0，负数为1。
```
比如，十进制中的+3，计算机字长为8位，转成二进制就是0000 0011。如果是-3，就是1000 0011。
这里的0000 0011和1000 0011就是机器数。
```
#### 真值
因为机器数的第一位是符号位，所以机器数的形式值就不等于正真的数值。为区别机器数，将带符号位的机器数对应的正真数值称为机器数的真值。
```
比如，0000 0001的真值为+000 0001 = +1，1000 0001的真值为-000 001 = -1。
```
#### 原码
原码就是符号位加上真值的绝对值，即用第一位表示符号，其余位表示值。
```
比如8位二进制中，+1的原码为0000 0001。-1的原码为1000 0001。
```
#### 反码
* 正数的反码是其本身。
* 负数的反码是在其原码的基础上，符号位不变，其余各个位取反。

```
比如8位二进制中，+1的反码为0000 0001。-1的反码为1111 1110。
```
#### 补码
* 正数的补码是其本身。
* 负数的补码是在其原码的基础上，符号位不变，其余各个位取反，最后加1。即在其反码的基础上+1。

```
比如8位二进制中，+1的补码为0000 0001，-1的补码为1111 1111。
```
***

### 运算符
#### 左移 ( << )
运算规则：按照二进制把所有数字向左移动对应的位数，高位移出，低位的空位补零。
数学意义：在数字没有溢出的前提下，对于正数和负数，左移一位相当于乘以2的1次方，左移n位就相当于乘以2的n次方。
#### 带符号右移 ( >> )
运算规则：按照二进制把所有数字向右移动对应的位数，低位移出，高位的空位补符号位，即正数补0，负数补1。
数学意义：在数字没有溢出的前提下，右移一位相当于除以2的一次方，右移n位就相当于除以2的n次方。
#### 无符号右移 ( >>> )
运算规则：按照二进制把所有数字向右移动对应位数，低位移出，高位的空位补0。对于正数来说和带符号右移相同，负数则不同。
#### 取反 ( ~ )
用来对一个二进制数按位取反，即将0变1，1变0。运算优先级比算术，关系，逻辑运算符都高。
```
比如，八位二进制数0000 0011取反表示为~0000 0011的结果为1111 1100。
```
#### 位与 ( & )
真真为真，真假为假，假假为假。仅真真为真，其他为假。
```
比如，0000 0011 & 0000 0110 = 0000 0010
```
#### 位或 ( | )
真真为真，真假为真，假假为假。只要有真则为真，仅假假为假。
```
比如，0000 0011 | 0000 0110 = 0000 0111
```
#### 位异 ( ^ )
真真为假，真假为真，假假为假。仅真假为真，其他为假。
```
比如, 0000 0011 ^ 0000 0110 = 0000 0101
```

### 四则运算
#### 加法
将整数a，b的加法转化为a，b两数二进制的位运算。
```
a + b = a ^ b + (a & b) << 1
```
#### 减法
将整数a, b的减法转化为a，-b的加法。
```
a - b = a + (-b) = a ^ (-b) + (a & -b) << 1
```
